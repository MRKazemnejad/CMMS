{% extends "maintenance/layout/base.html" %}

{% block title %} انتخاب لکوموتیو {% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="/static/css/reportStyle.css?v0.1">
    <style>
        /* Right-align text for Persian */
        body, .card {
            direction: rtl;
            text-align: right;
        }

        /* Hover effect for locomotive cards */
        .locomotive-card {
            transition: background-color 0.2s, box-shadow 0.2s;
        }

        .locomotive-card:hover {
            background-color: #f8f9fa;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }

        /* Background colors based on failure status */
        .locomotive-card.active-failure {
            background-color: #fff3cd; /* Yellow for active failure */
        }

        .locomotive-card.no-active-failure {
            background-color: #d4edda; /* Green for no active failure */
        }

        /* Card layout */
        .locomotive-card .card-body {
            padding: 0.75rem;
        }

        /* Responsive adjustments */
        @media (max-width: 576px) {
            .locomotive-card .card-body {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
{% endblock stylesheets %}

{% block content %}
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-12">
                <div class="card my-4 shadow">
                    <div class="card-body">
                        <h2 class="card-title account">انتخاب لکوموتیو</h2>
                    </div>
                </div>

                <div class="row g-1 justify-content-center">
                    {% for locomotive in locomotives %}
                        <div class="col-md-2 my-1">
                            <a class="text-decoration-none" href="{% url 'maintenance:mainLocomotiveFailure' locomotive_id=locomotive.id %}">
                                <div class="card locomotive-card {% if locomotive.has_active_failure %}active-failure{% else %}no-active-failure{% endif %}">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ locomotive.locomotive_id }}</h5>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% empty %}
                        <p class="no-repairs-message">هیچ لکوموتیوی ثبت نشده است.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endblock content %}

{% block javascripts %}

    <script>
        $(document).ready(function () {
            // Add selected class on card click
            $('.locomotive-card').on('click', function () {
                $('.locomotive-card').removeClass('selected');
                $(this).addClass('selected');
            });
        });
    </script>
{% endblock javascripts %}